@echo off
set db_user=root
set db_pass=your_password
set db_name=your_database
set db_host=localhost
set mysql_path="C:\xampp\mysql\bin\mysql.exe"

for %%f in (*.sql) do (
    echo Importing %%f ...
    %mysql_path% -u%db_user% -p%db_pass% -h%db_host% %db_name% < "%%f"
)

echo Tous les fichiers SQL ont Ã©tÃ© importÃ©s !
pause
# **Automatisation de l'Insertion des DonnÃ©es SQL dans XAMPP**

## **1. Contexte et Objectifs**

### **Contexte**

Actuellement, l'insertion des donnÃ©es dans la base MySQL de notre application se fait manuellement via lâ€™importation dâ€™un fichier SQL unique. Or, nous avons plusieurs fichiers SQL gÃ©nÃ©rÃ©s, et Ã  lâ€™avenir, nous nâ€™aurons plus dâ€™accÃ¨s direct Ã  la base de donnÃ©es qui sera hÃ©bergÃ©e dans un autre dÃ©partement.

### **Objectifs**

- Automatiser lâ€™insertion des fichiers SQL dans la base MySQL sous XAMPP.
- RÃ©duire les actions manuelles et limiter les erreurs.
- Assurer un contrÃ´le des nouvelles donnÃ©es avant leur insertion dÃ©finitive.
- Garantir lâ€™intÃ©gritÃ© et la sÃ©curitÃ© des donnÃ©es.

---

## **2. Approche AdoptÃ©e**

### **1ï¸âƒ£ Fusionner tous les fichiers SQL en un seul fichier**

ðŸ“Œ **Pourquoi ?** La plateforme actuelle permet dâ€™importer un seul fichier SQL Ã  la fois.

âœ… **Solution :**

- Regrouper tous les fichiers SQL dans un fichier unique avant l'importation.
- Utilisation dâ€™une commande `cmd` pour concatÃ©ner les fichiers SQL :
  ```sh
  cd "C:\Users\taktourb\Downloads\MO\"
  copy /b insert_statements_*.sql all_inserts.sql
  ```
- Importation de `all_inserts.sql` via lâ€™interface de lâ€™application.

### **2ï¸âƒ£ Automatiser lâ€™importation avec un script batch**

ðŸ“Œ **Pourquoi ?** Importer plusieurs fichiers SQL sans intervention humaine.

âœ… **Solution :**

- CrÃ©ation dâ€™un fichier batch `import_all.bat` qui exÃ©cute tous les fichiers SQL du dossier.
- Script batch utilisÃ© :
  ```bat
  @echo off
  set db_user=root
  set db_pass=your_password
  set db_name=your_database
  set db_host=localhost
  set mysql_path="C:\xampp\mysql\bin\mysql.exe"

  for %%f in (*.sql) do (
      echo Importing %%f ...
      %mysql_path% -u%db_user% -p%db_pass% -h%db_host% %db_name% < "%%f"
  )

  echo Tous les fichiers SQL ont Ã©tÃ© importÃ©s !
  pause
  ```
- ExÃ©cution automatique de lâ€™importation avec `double-clic` sur `import_all.bat`.

### **3ï¸âƒ£ SÃ©curiser les insertions avec une table temporaire**

ðŸ“Œ **Pourquoi ?** Ã‰viter que des erreurs dans les fichiers SQL nâ€™affectent la base principale.

âœ… **Solution :**

- Importer les donnÃ©es dans une **table temporaire** avant validation.
- CrÃ©ation de la table temporaire :
  ```sql
  CREATE TABLE IF NOT EXISTS morningcheck_temp LIKE morningcheck;
  ```
- Modifier les fichiers SQL pour insÃ©rer les donnÃ©es dans `morningcheck_temp` au lieu de `morningcheck`.
- AprÃ¨s validation des donnÃ©es, fusionner avec la table principale :
  ```sql
  INSERT INTO morningcheck SELECT * FROM morningcheck_temp;
  DROP TABLE morningcheck_temp;
  ```

---

## **3. BÃ©nÃ©fices de lâ€™Automatisation**

| **CritÃ¨res**            | **Avant l'automatisation**          | **AprÃ¨s l'automatisation**            |
| ----------------------- | ----------------------------------- | ------------------------------------- |
| **Temps de traitement** | Importation manuelle                | 100% automatisÃ©e                      |
| **FiabilitÃ©**           | Risque dâ€™erreurs humaines           | VÃ©rification avant insertion          |
| **SÃ©curitÃ©**            | Modification directe de la base     | Insertion dans une table temporaire   |
| **ScalabilitÃ©**         | Traitement limitÃ© Ã  un seul fichier | Importation de plusieurs fichiers SQL |

---

## **4. Recommandations et Mise en Place**

### **ðŸ“Œ Mise en place immÃ©diate :**

âœ… CrÃ©ation du script batch `import_all.bat` pour lâ€™importation automatique.
âœ… Test de la fusion des fichiers SQL en un seul fichier (`copy /b`).

### **ðŸ“Œ SÃ©curisation de la base de donnÃ©es :**

âœ… IntÃ©gration dâ€™une table temporaire pour tester les nouvelles donnÃ©es avant insertion.
âœ… VÃ©rification des logs dâ€™importation pour identifier les Ã©ventuelles erreurs.

### **ðŸ“Œ Suivi et monitoring :**

âœ… IntÃ©gration dâ€™un tableau de bord Power BI pour suivre lâ€™Ã©volution des insertions.
âœ… Mise en place dâ€™un systÃ¨me dâ€™alertes en cas dâ€™erreur dâ€™importation.

---

## **5. Conclusion**

GrÃ¢ce Ã  cette approche d'automatisation, nous pouvons garantir une **insertion rapide, fiable et sÃ©curisÃ©e** des donnÃ©es dans MySQL sous XAMPP, sans intervention manuelle. Cette solution rÃ©duit les erreurs et optimise la gestion des fichiers SQL pour assurer une meilleure scalabilitÃ© du processus.

